/*! easy-toggle-state v1.8.0 | (c) 2018 Matthieu Bu√© <https://twikito.com> | MIT License | https://twikito.github.io/easy-toggle-state/ */
!function(){"use strict";var t=document.documentElement.getAttribute("data-easy-toggle-state-custom-prefix")||"toggle",e=function(e){return["data",arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,e].filter(Boolean).join("-")},r=e("class"),i=e("escape"),n=e("event"),o=e("group"),a=e("is-active"),u=e("outside"),c=e("radio-group"),s=e("target"),g=e("target-all"),l=e("target-next"),f=e("target-only"),A=e("target-parent"),h=e("target-previous"),v=e("target-self"),d=e("state"),b=e("trigger-off"),E=new Event("toggleAfter"),m=new Event("toggleBefore"),T=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},p=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)},y=function(t,e){var i=t?"["+t+"]":"";return[].concat(p(e?e.querySelectorAll(i):document.querySelectorAll(("["+r+"]"+i).trim())))},L=function(t,e){return t.dispatchEvent(e)},w=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(T(e={},"aria-checked",t.isToggleActive),T(e,"aria-expanded",t.isToggleActive),T(e,"aria-hidden",!t.isToggleActive),T(e,"aria-selected",t.isToggleActive),e);return Object.keys(r).forEach(function(e){return t.hasAttribute(e)&&t.setAttribute(e,r[e])})},k=function(t){var e=t.hasAttribute(o)?o:c;return y(e+'="'+t.getAttribute(e)+'"').filter(function(t){return t.isToggleActive})},S=function(t,e){if(0===e.length)return console.warn("There's no match for the selector '"+t+"' for this trigger"),[];var r=t.match(/#\w+/gi);return r&&r.forEach(function(t){var r=[].concat(p(e)).filter(function(e){return e.id===t.slice(1)});r.length>1&&console.warn("There's "+r.length+" matches for the selector '"+t+"' for this trigger")}),[].concat(p(e))},x=function t(e){var r=e.target;r.closest("["+d+'="true"]')||(y(u).forEach(function(t){t!==r&&t.isToggleActive&&(t.hasAttribute(o)||t.hasAttribute(c)?C:j)(t)}),r.hasAttribute(u)&&r.isToggleActive&&document.addEventListener(r.getAttribute(n)||"click",t,!1))},O=function(t){return j(t.target.targetElement)},q=function(t){if(t.hasAttribute(u))return t.hasAttribute(c)?console.warn("You can't use '"+u+"' on a radio grouped trigger"):t.isToggleActive?document.addEventListener(t.getAttribute(n)||"click",x,!1):document.removeEventListener(t.getAttribute(n)||"click",x,!1)},B=function(t,e,r){return function(t){if(t.hasAttribute(s)||t.hasAttribute(g)){var e=t.getAttribute(s)||t.getAttribute(g);return S(e,document.querySelectorAll(e))}if(t.hasAttribute(A)){var r=t.getAttribute(A);return S(r,t.parentElement.querySelectorAll(r))}if(t.hasAttribute(v)){var i=t.getAttribute(v);return S(i,t.querySelectorAll(i))}return t.hasAttribute(h)?S("previous",[t.previousElementSibling].filter(Boolean)):t.hasAttribute(l)?S("next",[t.nextElementSibling].filter(Boolean)):[]}(t).forEach(function(i){L(i,m),i.isToggleActive=!i.isToggleActive,w(i),r&&!i.classList.contains(e)&&i.classList.add(e),r||i.classList.toggle(e),t.hasAttribute(u)&&i.setAttribute(d,t.isToggleActive),L(i,E),function(t,e){var r=y(b,t);if(0!==r.length)e.isToggleActive?r.forEach(function(t){t.targetElement=e,t.addEventListener("click",O,!1)}):r.forEach(function(t){t.removeEventListener("click",O,!1)})}(i,t)})},j=function(t){L(t,m);var e=t.getAttribute(r)||"is-active";return t.isToggleActive=!t.isToggleActive,w(t),t.hasAttribute(f)||t.classList.toggle(e),L(t,E),B(t,e,!1),q(t)},D=function(t){var e;L(t,m);var i=t.getAttribute(r)||"is-active";return t.isToggleActive=!0,w(t,(T(e={},"aria-checked",!0),T(e,"aria-expanded",!0),T(e,"aria-hidden",!1),T(e,"aria-selected",!0),e)),t.hasAttribute(f)||t.classList.contains(i)||t.classList.add(i),L(t,E),B(t,i,!0),q(t)},C=function(t){var e=k(t);return 0===e.length?j(t):-1===e.indexOf(t)?(e.forEach(j),j(t)):-1===e.indexOf(t)||t.hasAttribute(c)?void 0:j(t)},M=function(){if(0===y().length)return console.warn("Easy Toggle State is not used: there's no trigger with '"+r+"' attribute to initialize.");y(a).forEach(function(t){return(t.hasAttribute(o)||t.hasAttribute(c))&&k(t).length>0?console.warn("Toggle group '"+(t.getAttribute(o)||t.getAttribute(c))+"' must not have more than one trigger with '"+a+"'"):D(t)}),y().forEach(function(t){t.addEventListener(t.getAttribute(n)||"click",function(e){e.preventDefault(),(t.hasAttribute(o)||t.hasAttribute(c)?C:j)(t)},!1)});var t=y(i);t.length>0&&document.addEventListener("keyup",function(e){"Escape"!==e.key&&"Esc"!==e.key||t.forEach(function(t){if(t.isToggleActive)return t.hasAttribute(c)?console.warn("You can't use '"+i+"' on a radio grouped trigger"):(t.hasAttribute(o)?C:j)(t)})},!1)};document.addEventListener("DOMContentLoaded",function t(){M(),document.removeEventListener("DOMContentLoaded",t)}),window.initEasyToggleState=M}();
